<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Contributing - RDK Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">RDK Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">RDK-V</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../RDK_V_Architecture/" class="dropdown-item">Architecture</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Contributing</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href=".." class="nav-link">RDK-B</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../RDK_V_Architecture/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="true">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="false">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#build-instructions" class="nav-link">Build Instructions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#flashing-and-bringup" class="nav-link">Flashing and bringup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#test-setup-requirements" class="nav-link">Test Setup requirements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1>Try Out RDK-V</h1>
<p>This guide provides step-by-step instructions for bringing up RDK using a Raspberry Pi as the target device. The document covers the necessary hardware &amp; build setup, build instructions, and detailed flashing instructions to get your Raspberry Pi ready to run the RDK software.</p>
<p>The RDK port for Raspberry Pi makes the RDK software stack available on a popular hardware device. Raspberry Pi (RPI) for RDK-V supports Dunfell builds. A variety of images based on requirements can be built for RPI, such as Media Client, Media Gateway Hybrid, and IP Client STB.</p>
<h2 id="build-instructions">Build Instructions</h2>
<h3>Build Requirements</h3>

<h4>Setting up the Host Environment</h4>

<table>
<thead>
<tr>
<th>Item</th>
<th>Specifications</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux PC</td>
<td>64 bit Ubuntu 18.04 LTS (Precisely supported distributions and versions are <a href="https://www.yoctoproject.org/docs/3.1/ref-manual/ref-manual.html#detailed-supported-distros">here</a>)</td>
</tr>
<tr>
<td>Free HDD Space</td>
<td>Minimum 100GB Free Memory Space</td>
</tr>
<tr>
<td>Raspberry Pi development kit</td>
<td>Raspberry Pi 4 Model B</td>
</tr>
</tbody>
</table>
<h4>Host tool versions</h4>

<table>
<thead>
<tr>
<th>Tool</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Git</td>
<td>1.8.3.1 or greater</td>
</tr>
<tr>
<td>Python</td>
<td>3.8.10</td>
</tr>
<tr>
<td>tar</td>
<td>1.24 or greater</td>
</tr>
</tbody>
</table>
<p>Install the following packages for setting up your host VM before building an image</p>
<blockquote>
<p>The instructions provided below are meant to be executed via the command line on an Ubuntu machine.</p>
</blockquote>
<pre><code class="language-bash"># essential package installation
# super user mode is required

# major essential packages
sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib g++-multilib build-essential chrpath socat bison curl cpio python3 python3-pip python3-pexpect xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev pylint3 xterm
</code></pre>
<p>Configure bash as default command interpreter for shell scripts</p>
<pre><code class="language-bash">sudo dpkg-reconfigure dash
</code></pre>
<p>Select <strong>No</strong></p>
<h4>Configure Git</h4>

<p>Upgrade Git version to 1.8.x or higher.</p>
<p>Once git is installed, configure your name and email using the below commands.</p>
<pre><code class="language-bash"># review your existing configuration
git config --list --show-origin

# configure user name and email address
git config --global user.name &quot;John Doe&quot;
git config --global user.email johndoe@example.com

# configure git cookies. Needed for Gerrit to only contact the LDAP backend once.
git config --global http.cookieFile /tmp/gitcookie.txt
git config --global http.saveCookies true
</code></pre>
<h4>Configure Repo tool</h4>
<p>In order to use Yocto build system, first you need to make sure that repo is properly installed on the machine</p>
<pre><code class="language-bash"># create a bin directory
mkdir ~/bin
export PATH=~/bin:$PATH

# Download the repo tool and ensure that it is executable
curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
chmod a+x ~/bin/repo
</code></pre>
<p><strong>Note:</strong> it is also recommended to put credentials in .netrc when interacting with the repo.</p>
<p>A sample .netrc file is illustrated below.</p>
<blockquote>
<p>machine code.rdkcentral.com\
login <YOUR_USERNAME>\
password <YOUR_PASSWORD></p>
</blockquote>
<h3>Build Steps</h3>

<pre><code class="language-bash"># initialize the manifest with repo tool
repo init -u https://code.rdkcentral.com/r/manifests -b 6.0.0 -m rdkv.xml
repo sync --no-clone-bundle --no-tags 
MACHINE=raspberrypi4-64-rdk-android-mc source meta-cmf-raspberrypi/setup-environment
bitbake lib32-rdk-generic-mediaclient-wpe-image

# To build tdk image
bitbake lib32-rdk-generic-mediaclient-wpe-tdk-image
</code></pre>
<p>The generated image resides under the directory <strong>build-<MACHINE>/tmp/deploy/images/<MACHINE></strong>  of the Yocto workspace</p>
<h2 id="flashing-and-bringup">Flashing and bringup</h2>
<p>This section outlines two methods for flashing: Flashing the SD Card in a Linux environment and in a Windows environment ( using balenaEtcher App ).</p>
<h3>Flashing in Linux</h3>

<ul>
<li>Insert an SD card in the SD card port of the USB SD card reader (or Laptop). ( It is recommended to use a 32GB SD card and there should be minimum 12GB free space available in the device. )</li>
<li>Verify that the SD card has been detected by executing either of the commands listed below.</li>
</ul>
<pre><code class="language-bash">$lsblk
$sudo fdisk –l
</code></pre>
<pre><code class="language-bash">$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 931.5G  0 disk
├─sda1   8:1    0   350M  0 part
├─sda2   8:2    0     3G  0 part
├─sda3   8:3    0 896.4G  0 part /
├─sda4   8:4    0     1K  0 part
└─sda5   8:5    0  31.8G  0 part [SWAP]
sdb      8:16   1  14.9G  0 disk
├─sdb1   8:17   1    40M  0 part /media/raspberrypi
└─sdb2   8:18   1   552M  0 part /media/dd5efb34-1d40-4e50-bbc2-a75d3e02af97
sr0     11:0    1  1024M  0 rom
</code></pre>
<ul>
<li>Type the following command to ensure that the partitions, if present, on the SD card are not mounted.</li>
</ul>
<pre><code class="language-bash">$ mount
/dev/sda3 on / type ext4 (rw,errors=remount-ro)
proc on /proc type proc (rw,noexec,nosuid,nodev)
sysfs on /sys type sysfs (rw,noexec,nosuid,nodev)
none on /sys/fs/fuse/connections type fusectl (rw)
none on /sys/kernel/debug type debugfs (rw)
none on /sys/kernel/security type securityfs (rw)
udev on /dev type devtmpfs (rw,mode=0755)
devpts on /dev/pts type devpts (rw,noexec,nosuid,gid=5,mode=0620)
tmpfs on /run type tmpfs (rw,noexec,nosuid,size=10%,mode=0755)
none on /run/lock type tmpfs (rw,noexec,nosuid,nodev,size=5242880)
none on /run/shm type tmpfs (rw,nosuid,nodev)
binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,noexec,nosuid,nodev)
rpc_pipefs on /run/rpc_pipefs type rpc_pipefs (rw)
nfsd on /proc/fs/nfsd type nfsd (rw)
none on /tmp/guest-zdrO76 type tmpfs (rw,mode=700)
gvfs-fuse-daemon on /var/lib/lightdm/.gvfs type fuse.gvfs-fuse-daemon (rw,nosuid,nodev,user=lightdm)
/dev/sdb1 on /media/raspberrypi type vfat (rw,nosuid,nodev,uid=136,gid=148,shortname=mixed,dmask=0077,utf8=1,showexec,flush,uhelper=udisks)
/dev/sdb2 on /media/dd5efb34-1d40-4e50-bbc2-a75d3e02af97 type ext3 (rw,nosuid,nodev,uhelper=udisks)
</code></pre>
<ul>
<li>Repeat the below command to unmount all the mounted partition present on the SD card.</li>
</ul>
<pre><code class="language-bash">$umount &lt;partition-mountpoint&gt;
</code></pre>
<pre><code class="language-bash">$ sudo umount /dev/sdb1
$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 931.5G  0 disk
├─sda1   8:1    0   350M  0 part
├─sda2   8:2    0     3G  0 part
├─sda3   8:3    0 896.4G  0 part /
├─sda4   8:4    0     1K  0 part
└─sda5   8:5    0  31.8G  0 part [SWAP]
sdb      8:16   1  14.9G  0 disk
├─sdb1   8:17   1    40M  0 part
└─sdb2   8:18   1   552M  0 part /media/dd5efb34-1d40-4e50-bbc2-a75d3e02af97
sr0     11:0    1  1024M  0 rom
$ sudo umount /dev/sdb2
$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 931.5G  0 disk
├─sda1   8:1    0   350M  0 part
├─sda2   8:2    0     3G  0 part
├─sda3   8:3    0 896.4G  0 part /
├─sda4   8:4    0     1K  0 part
└─sda5   8:5    0  31.8G  0 part [SWAP]
sdb      8:16   1  14.9G  0 disk
├─sdb1   8:17   1    40M  0 part
└─sdb2   8:18   1   552M  0 part
sr0     11:0    1  1024M  0 rom
</code></pre>
<ul>
<li>Execute the following command to flash the image on the SD card.</li>
</ul>
<pre><code class="language-bash">$sudo dd if=&lt;path to ImageName.Rpi-sdimg&gt; of=&lt;path to SD card space&gt; bs=4M
Example:
$sudo dd if=rdk-generic-mediaclient-wpe-image.Rpi-sdimg of=/dev/sdb bs=4M
149+0 records in
149+0 records out
624951296 bytes (625 MB) copied, 39.7752 s, 15.7 MB/s
</code></pre>
<ul>
<li>Remove the SD card and insert it to the Raspberry Pi SD card slot.</li>
</ul>
<h3>Flashing in Windows</h3>
<p>To flash the image on an SD card, you will need to download the balenaEtcher application from <a href="https://www.balena.io/etcher/">here</a>
Note: Prefer to use a 32GB SD card and there should be a minimum of 12GB of free space available in the device. Be sure to remove all other portable flash drives/hard drives/SD cards from your computer before flashing the RDK image.</p>
<ul>
<li>Open the application. Select the image from your download folder</li>
<li>Select the drive containing your SD card</li>
<li>Click “Flash” to copy the image onto the SD card</li>
</ul>
<p><img alt="Baleno Etcher 1!" src="../tryout_rdkv_baleno_1.jpg" />
<img alt="Baleno Etcher 2!" src="../tryout_rdkv_baleno_2.PNG" /></p>
<p>Once image flashing is done, remove the SD card from the device/laptop and insert the SD card into the microSD card slot on the underside of your Raspberry Pi.</p>
<h2 id="test-setup-requirements">Test Setup requirements</h2>
<p><img alt="Test Setup!" src="../tryout_rdkv_testsetup.PNG" /></p>
<ul>
<li>Connect TV/Monitor to HDMI video output.</li>
<li>Connect Ethernet cable to ETH port.</li>
<li>The other end of the Ethernet cable should be connected to the network where the DHCP server is running so that the Raspberry Pi device gets assigned an IP address on boot-up.</li>
<li>Insert the SD card into microSD card slot.</li>
<li>Connect the power cable to Micro USB power input.</li>
<li>Power on the Raspberry Pi.</li>
</ul>
<p>TV screen will display the default RDK UI as shown below.</p>
<p><img alt="UI 1!" src="../tryout_rdkv_screen1.jpg" /></p>
<p>To view the Raspberry Pi's IP address(referred as machineIP from now), Go to 'Settings → Network Configuration → Network Info → see for 'IP Address''.
<img alt="UI 2!" src="../tryout_rdkv_screen2.png" /></p>
<h4>Accessing controller UI</h4>
<p>For connecting to Controller UI, use URL: http://<machineIP>:9998</p>
<p><img alt="UI 1!" src="../tryout_rdkv_controllerUI_1.png" /></p>
<p>Plugins can be enabled or disabled from controller UI. </p>
<p><img alt="UI 1!" src="../tryout_rdkv_controllerUI_2.png" /></p>
<p>For example, Wifi plugin related services can be triggered from Wi-Fi tab in controller UI. Scan and select from available networks.</p>
<p><img alt="UI 1!" src="../tryout_rdkv_controllerUI_3.png" /></p>
<p>For ssh, use ssh root@machineip.
For verifying the image details, use cat /version.txt command. </p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
